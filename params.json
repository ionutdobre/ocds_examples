{"name":"Open Contracting Data Standard API","tagline":"","body":"**Open Contracting Data Standard** aims to allow information to be shared as structured data and to provide a transparent way to analyze all the phases of a contract from planning to completion. By creating the *OCDS API* we are offering to developers the possibility to create easy to interpret visual reports and application that can identify trends in public contracts.\r\n\r\nThis document provides a description of the APIs and examples of their use.\r\n\r\n1. API conventions\r\n2. Records API\r\n3. Releases API\r\n4. Metadata API\r\n5. Versioning\r\n6. Errors\r\n7. Possible response\r\n\r\n## 1. API Conventions\r\n\r\n### Authentication\r\nUsing the OCDS API doesn’t require any kind of authentication, users can send as many request as they want, the only limitation will be the number of records returned; in this way we encourage developers to use pagination in order to iterate throw all of the data.\r\n\r\n### JSON Callbacks\r\nThe **OCDS API** is developer-friendly so it’s explorable via a browser address bar for testing purposes, but also in a real application you can use AJAX or JSON-P callbacks in order to query the system and *consume* the response:\r\n\r\n```\r\n$.ajax({\r\n\ttype: 'GET',\r\n\turl:  'http://www.contractawards.eu/open-contracting/api/v1/years',\r\n\tsuccess: function(response) {\r\n\t\tconsole.log(response.hits);\r\n\t}\r\n});\r\n```\r\n\r\nAll the request should have the type **GET**.\r\n\r\n### Definitions from OCDS\r\nInformation about an Open Contracting Process may accumulate over time. As a result, the Open Contracting Data Standard provides for two kinds of data:\r\n1. **Contracting releases** - each release provides information pertaining to a particular stage in the contracting process - such as tender notices, award notices, or details of a finalized contract.\r\n2. **Contracting record** - A contracting record provides a snapshot of all the key elements of a unique contracting process, including its planning, formation, performance and completion.\r\n\r\nBoth **contracting releases** and **contracting records** are provided within data packages, containing meta-data about the publisher, publication data and licensing information.\r\n\r\n## 2. Records API\r\n\r\nThis API can be used to generate record packages or to retrieve individual *record* information. It is build to be flexible and with the help of the *filters* users can slice the data and drill down the results.\r\n\r\n### Basic call and parameters\r\n\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/record-package?<filters>\r\n```\r\nThe following parameters (```filters```) are supported:\r\n* ```supplier``` - this represents the supplier name; Ex: *Acciona infraestructuras*\r\n* ```buyer``` - this represents the buyer name; Ex: *ADMINISTRADOR DE INFRAESTRUCTURAS FERROVIARIAS*\r\n* ```sector``` - the name of the sector; Ex: *Transport services* \r\n* ```year``` - Ex: *2012*\r\n* ```procedure``` - Ex: *Service contract*\r\n* ```awardCriteria``` - Ex: *Lowest price*\r\n* ```buyerCountry``` - Ex: *Germany*\r\n* ```supplierCountry``` - Ex: *Italy*\r\n\r\nPlease note that the last 6 criteria: *sector*, *year*, *procedure*, *awardCriteria*, *buyerCountry* and *supplierCountry* need to be valid. You can check if one of these criteria is valid by invoking the **Metadata API**.\r\n\r\n**Request pagination**\r\nIn order to limit the response size and to allow a better manipulation of the data each request accepts the following parameters:\r\n* ```page``` – page number\r\n* ```pageSize``` – number of records per page; the default value is 100 and it can not be greater that 1000\r\n\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/record-package?year=2008&buyerCountry=Germany&page=10&pageSize=10\r\n```\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/record-package?year=2008&supplierCountry=France&page=1&pageSize=50\r\n```\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/record-package?sector=Construction work&procedure=Service contract&year=2012&page=1&pageSize=1000\r\n```\r\n\r\n### Rules for invoking the Filter API\r\n1.\tSupplier name and buyer name reset all other parameters, in other words if one of the supplier or buyer parameter is present all other parameters will be ignored. \r\n2.\tAll other parameters (sector, year, procedure, awardCriteria, buyerCountry, supplierCountry) can be combined in any order with the condition that at least two criteria from the aforementioned list be used\r\n3.\tThe HTTP Method for all request should be GET\r\n\r\n### Limiting release content that is returned by the API\r\n**Open Contracting Data Standard** allows a release to be displayed in 2 ways in a record package:\r\n* as a URI having a unique releaseID that contains the actual information about the release\r\n* embed the actual release contend(the same content that can be obtain using the first method, but with this method the response  size will be much smaller\r\n\r\nHaving this in consideration and the fact that an API consumer doesn’t always need the full representation of a release the user can use the ```embed=true``` parameter in order to minimize network traffic and speed up the usage of the **Records API**.\r\n\r\nFor example, the following request would retrieve just the basic information about a record package but it will also have the releases URI that can be further used to retrieve the releases content:\r\n\r\n```\r\nGET http://www.contractawards.eu/open-contracting/api/v1/record-package?year=2012&embed=true\r\n\r\n{\r\n    \"uri\": \"http://www.contractawards.eu/open-contracting/api/v1/record-package?year=2012”,\r\n    \"publisher\": {\r\n        \"name\": \"Development Gateway\"\r\n    },\r\n    \"license\": \"http://opensource.org/licenses/MIT\",\r\n    \"publishedDate\": \"2012-09-14T04:28:58-0400\",\r\n    \"packages\": [\r\n        \"http://www.contractawards.eu/open-contracting/api/v1/release-package/releaseID1\"\r\n    ],\r\n    \"records\": [\r\n        {\r\n            \"ocid\": \"1234-5678\",\r\n            \"releases\": [\r\n                {\r\n                    \"name\": \"releaseID1\",\r\n                    \"uid\": \"releaseID\",\r\n                    \"uri\": \"http://www.contractawards.eu/open-contracting/api/v1/release/releaseID1\"\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n### Getting a single record\r\n\r\nEach record has a unique Open Contracting ID called ```ocid``` (http://ocds.open-contracting.org/standard/r/0__3__3/#conceptual-model) and sometimes it is useful not to see the big picture but only the informations about a particular record so the user can do that by using the following API:\r\n\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/record?recordId=<ocid>\r\n```\r\n\r\n### Pretty print format\r\nBy default the API provides pretty printing of the JSON output because it’s more approachable but in a production application the user can reduce the cost of the data transfer by using the parameter ```?pretty=false``` in order to remove all the white spaces from the response.\r\n\r\n## 3. Releases API\r\n\r\nThis API can be used to obtain informations about a package release or a particular release. It can be useful to obtain more  information about a particular stage in the contracting process or if the user is using the ```embed=true``` parameter in the **Records API** and then he wants to get the content of the releases.\r\n\r\n### Basic call and parameters\r\n\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/release-package?releaseId=<id>\r\n```\r\n\r\nIt can be used to get the release package with the given ```id```.\r\n\r\n```\r\nhttp://www.contractawards.eu/open-contracting/api/v1/release?releaseId=<id>\r\n```\r\n\r\nIt can be used to get only one release content with the given ```id```.\r\n\r\n**Pretty format** - the **Release API** supports the same ```pretty=false``` parameter as **Records API** in order to get a white-space compressed response.\r\n\r\n\r\n## 4. Metadata API\r\n\r\n**Getting filters metadata**\r\nThis API is used to get information about the *filters* that can be used with the **Records API**\r\n\r\n### Basic call and parameters\r\n```\r\nGET /open-contracting/api/v1/<dataset>\r\n```\r\n\r\nCalls will return information about the ```dataset``` and all valid values that can be used. If a value is not returned, for example year 2000, this means that we don’t have contracts published in 2000.\r\n\r\nPossible values for ```dataset```:\r\n* ```years``` - returns an array of valid years\r\n* ```buyerCountries``` - returns all buyer countries\r\n* ```supplierCountries``` - returns supplier countries\r\n* ```sectors``` - returns the main sector of the contract\r\n* ```procedures``` - returns the procedures (Service contract, Works)\r\n* ```awardCriteria``` - returns the awarding criteria (Lowest price, The most economic tender)\r\n\r\n#### Response example\r\n```\r\nGET http://www.contractawards.eu/open-contracting/api/v1/years\r\n\r\n{\r\n  hits: [2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013]\r\n}\r\n```\r\n\r\nThe above response will be available in a web browser, but if the user uses ajax, then a possible way to get all the years that can be used to filter the data will be:\r\n\r\n```\r\n$.ajax({\r\n\ttype: 'GET',\r\n\turl: 'http://www.contractawards.eu/open-contracting/api/v1/years',\r\n\tsuccess: function(response) {\r\n\t\tconsole.log(response.hits);\r\n\t}\r\n});\r\n```\r\n\r\n## 5. Versioning\r\n\r\nChange is inevitable so we decided to implement a versioning API that will help us to iterate faster and prevent invalid requests. This will also allow us to easily adopt new version of the OCDS standard and continue to offer old API versions for a period of time. The version are identified as ```/api/v1/```, ```api/v2/``` and so on.\r\n\r\n## 6. Errors\r\n\r\nIn case of an error(client issue of server issue) we will return a response with a JSON error body that will provide:  a useful error message, a unique error code that can be looked up for a detailed description in the documentation and the URL that cause the error. For example:\r\n\r\n```\r\n{\r\n  \"errors\": [\r\n   {\r\n    \"code\" : 1024,\r\n    \"message\": \"Sorry, the requested resource does not exist\"\r\n    \"url\": \"http://www.contractawards.eu/open-contracting/api/v1/release?id=156809-2006\"\r\n   }\r\n  ]\r\n} \r\n```\r\nor\r\n\r\n```\r\n{\r\n  \"errors\": [\r\n   {\r\n    \"code\" : 1020,\r\n    \"message\": \" You should use at least 2 criteria from the following list of filters: sector, year, procedure, awardCriteria, buyerCountry, supplierCountry\"\r\n    \"url\": \"http://www.contractawards.eu/open-contracting/api/v1/record-package?year=2012\"\r\n   }\r\n  ]\r\n} \r\n```\r\n\r\n## 7. Possible response\r\n\r\nIn order to have a complete picture on the response that you can get by calling the **Records API** you can take a look at the following example.\r\n\r\n```\r\n{\r\n    \"uri\": \"http://www.contractawards.eu/open-contracting/api/v1/record-package/{filters}\",\r\n    \"publisher\": {\r\n        \"name\": \"Development Gateway\"\r\n    },\r\n    \"license\": \"http://opensource.org/licenses/MIT\",\r\n    \"publishedDate\": \"2006-09-14T04:28:58-0400\",\r\n    \"packages\": [\r\n        \"http://www.contractawards.eu/open-contracting/api/v1/release-package/releaseID1\",\r\n        \"http://www.contractawards.eu/open-contracting/api/v1/release-package/releaseID2\",\r\n        \"http://www.contractawards.eu/open-contracting/api/v1/release-package/releaseID3\"\r\n    ],\r\n    \"records\": [\r\n        {\r\n            \"ocid\": \"1234-5678\",\r\n            \"releases\": [\r\n                {\r\n                    \"ocid\": \"1234-5678\",\r\n                    \"releaseID\": \"releaseID-1234-5678\",\r\n                    \"releaseDate\": \"2006-09-14T04:28:58-0400\",\r\n                    \"releaseTag\": \"awardNotice\",\r\n                    \"language\": \"en\",\r\n                    \"formationType\": \"tender\",\r\n                    \"buyer\": {\r\n                        \"id\": {\r\n                            \"name\": \"CONSEIL GÉNÉRAL DE L'YONNE\",\r\n                            \"uid\": \"6490828\",\r\n                            \"uri\": \"http://www.dgmarket.com/tenders/adminShowBuyer.do?buyerId=6490828\"\r\n                        },\r\n                        \"address\": {\r\n                            \"locality\": \"Paris\",\r\n                            \"region\": \"Paris\",\r\n                            \"country-name\": \"France\"\r\n                        }\r\n                    },\r\n                    \"tender\": {\r\n                        \"tenderID\": \"1219083\",\r\n                        \"notice\": {\r\n                            \"id\": \"1234-5678\",\r\n                            \"uri\": \"http://www.dgmarket.com/tenders/np-notice.do?noticeId=1219083\",\r\n                            \"publishedDate\": \"2006-03-21T00:00:00-0500\"\r\n                        },\r\n                        \"itemsToBeProcured\": [{\r\n                            \"description\": \"Construction work\",\r\n                            \"classificationScheme\": \"CPV\",\r\n                            \"classificationID\": \"45000000\",\r\n                            \"classificationDescription\": \"Construction work\"\r\n                        }],\r\n                        \"totalValue\": {\r\n                            \"amount\": 100000,\r\n                            \"currency\": \"EUR\"\r\n                        },\r\n                        \"numberOfBids\": 3\r\n                    },\r\n                    \"awards\": [{\r\n                        \"awardID\": \"1129358\",\r\n                        \"notice\": {\r\n                            \"id\": \"1234-5678\",\r\n                            \"uri\": \"http://www.dgmarket.com/tenders/np-notice.do?noticeId=1219083\",\r\n                            \"publishedDate\": \"2006-03-21T00:00:00-0500\"\r\n                        },\r\n                        \"awardValue\": {\r\n                            \"amount\": 100000,\r\n                            \"currency\": \"EUR\"\r\n                        },\r\n                        \"suppliers\": [{\r\n                            \"id\": {\r\n                                \"name\": \"Divers organismes\",\r\n                                \"uid\": \"123\",\r\n                                \"uri\": \"http://www.contractawards.eu/#!supplier=Divers+organismes\"\r\n                            },\r\n                            \"address\": {\r\n                                \"locality\": \"Bucharest\",\r\n                                \"region\": \"Ilfov\",\r\n                                \"country-name\": \"Romania\"\r\n                            }\r\n                        }],\r\n                        \"itemsAwarded\": [{\r\n                            \"description\": \"Construction work\",\r\n                            \"classificationScheme\": \"CPV\",\r\n                            \"classificationID\": \"45000000\",\r\n                            \"classificationDescription\": \"Construction work\"\r\n                        }]\r\n                    }]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}